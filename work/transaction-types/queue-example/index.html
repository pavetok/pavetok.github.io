<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
  <style>#main-menu .menu-item{display:inline;padding:0 15px}.menu-item a{color:#00f;font-size:1.4em;cursor:pointer;text-decoration:none}#content{font-size:1.2em}.article>.title{text-align:center;padding-top:20px}.section>.title{text-align:center;padding-top:10px}.article>.text{max-width:500px;margin:0 auto}.figure{text-align:center;padding:30px 0}.figure>.caption{text-align:center;font-size:.9em;font-style:italic}.article>.suggestion{max-width:400px;margin:0 auto}.suggestion>.title{margin:0}.suggestion>.teaser{font-size:.9em;color:#696969}</style>
  <title>Простейший пример с очередью</title>
</head>
<body>
<header>
  <nav id="main-menu">
    <ul>
      <li class="menu-item">
        <a href="/work/">Work</a>
      </li>
      <li class="menu-item">
        <a href="/blog/">Blog</a>
      </li>
      <li class="menu-item">
        <a href="/about/">About</a>
      </li>
    </ul>
  </nav>
</header>

<main id="content">
  <article class="article">
  <h2 class="title">
    Простейший пример с очередью
  </h2>
  
<div class="text">
    Перед трансакцией Алиса в любой момент может
либо воспользоваться очередью, либо передать её Бобу.
Боб в некоторый момент может получить доступ к очереди.
</div>



<figure class="figure">
  <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="261px" preserveAspectRatio="none" style="width:915px;height:261px;background:#FFFFFF;" version="1.1" viewBox="0 0 915 261" width="915px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vxfoie6lhou3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6f3707a36badac29f35c4f2560a5a777]
cluster Alice--><rect fill="#FFFFFF" filter="url(#f1vxfoie6lhou3)" height="202" style="stroke:#000000;stroke-width:0.5;" width="110" x="315" y="27"/><line style="stroke:#000000;stroke-width:0.5;" x1="315" x2="425" y1="47.2969" y2="47.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="351" y="41.9951">Alice</text><!--MD5=[c7e919412a9c7ba93d30e76653bef527]
cluster Bob--><rect fill="#FFFFFF" filter="url(#f1vxfoie6lhou3)" height="109" style="stroke:#000000;stroke-width:0.5;" width="116" x="453" y="7"/><line style="stroke:#000000;stroke-width:0.5;" x1="453" x2="569" y1="27.2969" y2="27.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="496" y="21.9951">Bob</text><!--MD5=[f631a2d2a9ec428334ceb3a9e6a8cbd5]
cluster Carol--><rect fill="#FFFFFF" filter="url(#f1vxfoie6lhou3)" height="109" style="stroke:#000000;stroke-width:0.5;" width="108" x="457" y="140"/><line style="stroke:#000000;stroke-width:0.5;" x1="457" x2="565" y1="160.2969" y2="160.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="490.5" y="154.9951">Carol</text><!--MD5=[947726f3b0a3c8e191d690ac34aa5fba]
entity capability1--><ellipse cx="370" cy="91" fill="#FEFECE" filter="url(#f1vxfoie6lhou3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/capability-send/" target="_top" title="capability" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/capability-send/" xlink:show="new" xlink:title="capability" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="338.5" y="120.9951">capability</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="52" x="344" y="70.6982">«send»</text><!--MD5=[2dfc073ce5ff1a4f17629f10cc08e712]
entity queue1--><ellipse cx="370" cy="184" fill="#FEFECE" filter="url(#f1vxfoie6lhou3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-client/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-client/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="347.5" y="213.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="55" x="342.5" y="163.6982">«client»</text><!--MD5=[0da2de25f02021315df161930d64f1c2]
entity capability2--><ellipse cx="511" cy="71" fill="#FEFECE" filter="url(#f1vxfoie6lhou3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/capability-receive/" target="_top" title="capability" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/capability-receive/" xlink:show="new" xlink:title="capability" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="479.5" y="100.9951">capability</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="476.5" y="50.6982">«receive»</text><!--MD5=[3346453bbf050adcc64f7e8fc5f6a5cb]
entity queue2--><ellipse cx="511" cy="204" fill="#FEFECE" filter="url(#f1vxfoie6lhou3)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-server/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-server/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="488.5" y="233.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="480.5" y="183.6982">«server»</text><path d="M6,78.5 L6,103.6328 A0,0 0 0 0 6,103.6328 L271,103.6328 A0,0 0 0 0 271,103.6328 L271,96.5 L360.9,91 L271,88.5 L271,88.5 L261,78.5 L6,78.5 A0,0 0 0 0 6,78.5 " fill="#FBFB77" filter="url(#f1vxfoie6lhou3)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M261,78.5 L261,88.5 L271,88.5 L261,78.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="12" y="95.5669">Возможность передать</text><a href="/work/transaction-types/queue-example/diagrams/queue-client/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-client/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="40" x="180" y="95.5669">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="224" y="95.5669">Бобу</text><path d="M613,58.5 L613,67 L520.2,71 L613,75 L613,83.6328 A0,0 0 0 0 613,83.6328 L906,83.6328 A0,0 0 0 0 906,83.6328 L906,68.5 L896,58.5 L613,58.5 A0,0 0 0 0 613,58.5 " fill="#FBFB77" filter="url(#f1vxfoie6lhou3)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M896,58.5 L896,68.5 L906,68.5 L896,58.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="619" y="75.5669">Возможность получить</text><a href="/work/transaction-types/queue-example/diagrams/queue-client/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-client/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="40" x="784" y="75.5669">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="828" y="75.5669">от Алисы</text><!--MD5=[f7bfd09ef1d48f1433bb256cd6504f08]
link capability1 to capability2--><path codeLine="31" d="M379.28,89.81 C404.06,86.24 477.44,75.68 501.94,72.16 " fill="none" id="capability1-capability2" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[33e0abff2227f4bf067f38c47f0ee4d4]
link queue1 to queue2--><path codeLine="32" d="M379.28,185.19 C404.06,188.76 477.44,199.32 501.94,202.84 " fill="none" id="queue1-queue2" style="stroke:#A80036;stroke-width:1.0;"/></g></svg>
  
  <figcaption class="caption">
    Перед трансакцией
  </figcaption>
  
</figure>



<div class="text">
    Во время трансакции Алиса уже лишается доступа к очереди.
Боб по-прежнему не имеет доступа к очереди.
</div>



<figure class="figure">
  <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="261px" preserveAspectRatio="none" style="width:403px;height:261px;background:#FFFFFF;" version="1.1" viewBox="0 0 403 261" width="403px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qh70a3pxmltn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6f3707a36badac29f35c4f2560a5a777]
cluster Alice--><rect fill="#FFFFFF" filter="url(#f1qh70a3pxmltn)" height="109" style="stroke:#000000;stroke-width:0.5;" width="110" x="7" y="140"/><line style="stroke:#000000;stroke-width:0.5;" x1="7" x2="117" y1="160.2969" y2="160.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="43" y="154.9951">Alice</text><!--MD5=[c7e919412a9c7ba93d30e76653bef527]
cluster Bob--><rect fill="#FFFFFF" filter="url(#f1qh70a3pxmltn)" height="109" style="stroke:#000000;stroke-width:0.5;" width="116" x="275" y="7"/><line style="stroke:#000000;stroke-width:0.5;" x1="275" x2="391" y1="27.2969" y2="27.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="318" y="21.9951">Bob</text><!--MD5=[f631a2d2a9ec428334ceb3a9e6a8cbd5]
cluster Carol--><rect fill="#FFFFFF" filter="url(#f1qh70a3pxmltn)" height="109" style="stroke:#000000;stroke-width:0.5;" width="108" x="279" y="140"/><line style="stroke:#000000;stroke-width:0.5;" x1="279" x2="387" y1="160.2969" y2="160.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="312.5" y="154.9951">Carol</text><!--MD5=[947726f3b0a3c8e191d690ac34aa5fba]
entity capability1--><ellipse cx="62" cy="204" fill="#FEFECE" filter="url(#f1qh70a3pxmltn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/capability-send/" target="_top" title="capability" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/capability-send/" xlink:show="new" xlink:title="capability" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="30.5" y="233.9951">capability</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="52" x="36" y="183.6982">«send»</text><!--MD5=[0da2de25f02021315df161930d64f1c2]
entity capability2--><ellipse cx="333" cy="71" fill="#FEFECE" filter="url(#f1qh70a3pxmltn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/capability-receive/" target="_top" title="capability" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/capability-receive/" xlink:show="new" xlink:title="capability" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="63" x="301.5" y="100.9951">capability</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="298.5" y="50.6982">«receive»</text><!--MD5=[3346453bbf050adcc64f7e8fc5f6a5cb]
entity queue2--><ellipse cx="333" cy="204" fill="#FEFECE" filter="url(#f1qh70a3pxmltn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-server/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-server/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="310.5" y="233.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="302.5" y="183.6982">«server»</text><!--MD5=[2dfc073ce5ff1a4f17629f10cc08e712]
entity queue1--><ellipse cx="196" cy="204" fill="#FEFECE" filter="url(#f1qh70a3pxmltn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-client/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-client/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="173.5" y="233.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="55" x="168.5" y="183.6982">«client»</text><!--MD5=[33e0abff2227f4bf067f38c47f0ee4d4]
link queue1 to queue2--><path codeLine="22" d="M205.04,204 C228.99,204 299.71,204 323.83,204 " fill="none" id="queue1-queue2" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bea37a60105fe139867f6a541706e114]
link capability1 to queue1--><path codeLine="23" d="M71.26,204 C93.39,204 154.2,204 181.46,204 " fill="none" id="capability1-to-queue1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="186.75,204,177.75,200,181.75,204,177.75,208,186.75,204" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[657ac1c40aa8dcc92fd5e0825fc817fc]
link queue1 to capability2--><path codeLine="24" d="M205.04,196.08 C227.87,173.59 293.18,109.24 320.14,82.68 " fill="none" id="queue1-to-capability2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="323.83,79.05,314.6164,82.5298,320.2731,82.564,320.2388,88.2208,323.83,79.05" style="stroke:#A80036;stroke-width:1.0;"/></g></svg>
  
  <figcaption class="caption">
    Во время трансакции
  </figcaption>
  
</figure>



<div class="text">
    После трансакции только Боб может пользоваться очередью,
но он не может передавать её кому-либо.
</div>



<figure class="figure">
  <?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="233px" preserveAspectRatio="none" style="width:257px;height:233px;background:#FFFFFF;" version="1.1" viewBox="0 0 257 233" width="257px" zoomAndPan="magnify"><defs><filter height="300%" id="fyzpugg2y218q" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6f3707a36badac29f35c4f2560a5a777]
cluster Alice--><rect fill="#FFFFFF" filter="url(#fyzpugg2y218q)" height="81" style="stroke:#000000;stroke-width:0.5;" width="54" x="31" y="140"/><line style="stroke:#000000;stroke-width:0.5;" x1="31" x2="85" y1="160.2969" y2="160.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="39" y="154.9951">Alice</text><!--MD5=[c7e919412a9c7ba93d30e76653bef527]
cluster Bob--><rect fill="#FFFFFF" filter="url(#fyzpugg2y218q)" height="109" style="stroke:#000000;stroke-width:0.5;" width="102" x="7" y="7"/><line style="stroke:#000000;stroke-width:0.5;" x1="7" x2="109" y1="27.2969" y2="27.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="43" y="21.9951">Bob</text><!--MD5=[f631a2d2a9ec428334ceb3a9e6a8cbd5]
cluster Carol--><rect fill="#FFFFFF" filter="url(#fyzpugg2y218q)" height="109" style="stroke:#000000;stroke-width:0.5;" width="108" x="137" y="7"/><line style="stroke:#000000;stroke-width:0.5;" x1="137" x2="245" y1="27.2969" y2="27.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="170.5" y="21.9951">Carol</text><!--MD5=[a944908f53c827558f1b7bd22bf63b29]
entity nothing--><text fill="#000000" font-family="sans-serif" font-size="0" lengthAdjust="spacing" textLength="0" x="58" y="185">nothing</text><!--MD5=[2dfc073ce5ff1a4f17629f10cc08e712]
entity queue1--><ellipse cx="58" cy="71" fill="#FEFECE" filter="url(#fyzpugg2y218q)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-client/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-client/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="35.5" y="100.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="55" x="30.5" y="50.6982">«client»</text><!--MD5=[3346453bbf050adcc64f7e8fc5f6a5cb]
entity queue2--><ellipse cx="191" cy="71" fill="#FEFECE" filter="url(#fyzpugg2y218q)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><a href="/work/transaction-types/queue-example/diagrams/queue-server/" target="_top" title="queue" xlink:actuate="onRequest" xlink:href="/work/transaction-types/queue-example/diagrams/queue-server/" xlink:show="new" xlink:title="queue" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="45" x="168.5" y="100.9951">queue</text></a><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="160.5" y="50.6982">«server»</text><!--MD5=[33e0abff2227f4bf067f38c47f0ee4d4]
link queue1 to queue2--><path d="M67.19,71 C90.72,71 158.29,71 181.81,71 " fill="none" id="queue1-queue2" style="stroke:#A80036;stroke-width:1.0;"/></g></svg>
  
  <figcaption class="caption">
    После трансакции
  </figcaption>
  
</figure>


</article>

</main>
</body>
</html>
